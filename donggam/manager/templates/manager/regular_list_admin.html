{% extends 'base.html' %}

{% block content %}

{% load static %}
<div class="regular_apply">
    <div class="board_wrap">
        <div class="board_title">
            <div class="notice_title">
                <h1>정기 캠퍼스투어(관리자)</h1>
            </div>
            <div class="regular_info">
                <form method="post" action="{% url 'manager:regulardate_cud' %}">
                    {% csrf_token %}
                    {% for d in tourdates %}
                    <p>[공지] {{ d.date.month }}월 정기 캠퍼스투어일은 {{d.date.day }}일 입니다.</p>
                    <input type="submit" name="edit" value="수정하기">
                    {% endfor %}
                    <p>
                    <input type="number" name="year">년 <input type="number" name="month">월 <input type="number" name="day">일 
                    <input type="submit" value="추가하기">
                    </p>
                </form>
            </div>
        </div>
        <div class="board_list_wrap">
            <div class="board_list">
                <div class="top">
                    <div class="num">번호</div>
                    <div class="title">제목</div>
                    <div class="status">신청상태</div>
                    <div class="date">작성일</div>
                </div>
                {% for r in page_obj %}
                <div class="body">
                    <div class="num">{{ r.pk }}</div>
                    <div class="title"><a href="{% url 'manager:admin_regular_form' reservation_id=r.pk %}">{{ r }}</a></div>
                    <div class="status">
                        {% if r.status == '1' %}
                        <wait style="color: #999999;">검토중</wait>
                        {% elif r.status == '2' %}
                        <high style="color: #DF633B;">승인완료</high>
                        {% elif r.status == '3' %}
                        <high style="color: #DF633B;">재검토요청</high>
                        {% endif %}
                    </div>
                    <div class="date">{{ r.created_at }}</div>
                </div>
                {% endfor %}
            </div>
            <div class="board_page">
                <a href="?page={{ page_obj.start_index }}" class="bt first"><<</a>
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}" class="bt prev"><</a>
                {% else %}
                <a href="#" class="bt prev"><</a>
                {% endif %}

                {% for p in page_obj.paginator.page_range %}
                {% if p == page_obj.number %}
                <a href="?page={{ p }}" class="num on">{{ p }}</a>
                {% else %}
                <a href="?page={{ p }}" class="num">{{ p }}</a>
                {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="bt next">></a>
                {% else %}
                <a href="#" class="bt next">></a>
                {% endif %}
                <a href="?page={{ page_obj.end_index }} " class="bt last">>></a>
            </div>
        </div>
        
    </div>
    
</div>
{% endblock %}